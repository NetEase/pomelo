/**
 * Module dependencies.
 */

try {
  var dbmgr = require('dbmgr');
} catch (err) {
  var dbmgr = require('../');
}

/**
 * Options.
 */

var options = {};

/**
 * Usage information.
 */
//var FileRewriter = require('../lib/rewriter/filerewriter');
//options.rewrite = new FileRewriter();

// Start server
var server = dbmgr.create(options);

var User = function User(name){
	this.name = name;
};

var user1 = new User('hello');
var user2 = new User('world');

server.register(user1,user1,function(resp){
	console.log('app.js register user1 call back result code=' + resp.code + ' body ' + resp.body);
});

server.register(user2,user2,function(resp){
	console.log('app.js register user2 call back result code=' + resp.code + ' body ' + resp.body);
});

server.get(user1,function(resp){
	console.log(' app.js get  call back result code=' + resp.code + ' body ' + resp.body.val.name);
});


setInterval(function(){user1.name = 'hello change ';console.log('change user name');},1000* 60 *1);

