<!DOCTYPE html>
<html>
 <head>
   <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
   <title>Pomelo</title>


    <!--colorbox js end-->
     <script src="js/lib/events.js"></script>
     <script src="js/lib/pomeloclient.js"></script>
     <script src="js/lib/socket.io.js"></script>

     <script type="text/javascript">
         var pomelo = window.pomelo;
         pomelo.on('connector.loginHandler.login', function(data){
             alert("welcome to pomelo:"+data.user);
             enterarea();
         });
         pomelo.on('area.userHandler.userHandler', function(data){
             alert(66666);
             alert("welcome to pomelo:"+data.code);
         });
         function show(){
                 var username = document.getElementById('loginUser').value;
                 var pwd = document.getElementById('loginPwd').value;
             if (!username) {
                 alert("请输入用户名");
                 return;
             }
             pomelo.init({socketUrl: window.__front_address__, log: true}, function() {
                 pomelo.request({
                     route:"connector.loginHandler.login",
                     username:username, password: pwd
                 }, function(data) {
                     alert(1111111);
                     var user = data.user;
                     var player = data.player;
                     alert(user)
                     enterarea();
                 });
             });
         }
         function enterarea(){
             pomelo.pushMessage({route:"area.userHandler.createPlayer", uid:"123", name: "555", roleId: "666"});
         }
     </script>


 </head>
    <body>

        <label>帐号： </label>
        <input id="loginUser" type="text" value=""/>
        <br/>
        <label>密码： </label>
        <input id="loginPwd" type="password" value=""/>
        <br/>
        <input id="login" type='button' value="登陆" onclick="show()"/>

    </body>
</html>

